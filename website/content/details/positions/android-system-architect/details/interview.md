# Android系统架构师 - 面试流程（内部版本）

> 本文档为内部使用，规范面试流程和评估标准。

## 面试总体流程

```
简历筛选 → 一面(技术基础) → 二面(架构设计) → 三面(团队匹配) → HR面 → Offer
  1-2天      60分钟           60分钟          45分钟        30分钟    3天
```

### 流程说明
- **简历筛选**：HR或技术leader初筛，重点看Framework经验
- **一面**：技术基础面，考察Framework、Binder、Native等核心能力
- **二面**：架构设计面，考察系统设计和问题解决能力
- **三面**：团队匹配面，考察软性素质和文化契合度
- **HR面**：薪资谈判、背景调查、到岗时间确认
- **Offer**：确定薪资、股权、入职时间

### 面试官安排
- **一面**：Qpjoy或其他技术成员
- **二面**：技术合伙人或资深工程师
- **三面**：CEO或CTO
- **HR面**：HR或CEO

## 一面：技术基础（60分钟）

### 面试目标
考察候选人Android Framework、Binder通信、Native开发等核心技术能力，确保基础扎实。

### 面试结构
- 自我介绍（5分钟）
- 过往项目深挖（15分钟）
- Framework核心知识（20分钟）
- Binder和Native技术（15分钟）
- 候选人提问（5分钟）

### 详细题库

#### 1. 自我介绍和项目经历（5分钟）
**引导话术**：
"您好，请简单介绍一下自己的技术背景，重点说说您在Android系统层方面的项目经验。"

**关注点**：
- 工作年限和公司背景
- 系统层项目占比
- 技术亮点和成就
- 表达清晰度

**追问方向**：
- "您提到的XX项目，能详细说说您负责的部分吗？"
- "这个项目遇到的最大技术挑战是什么？"

#### 2. 过往项目深挖（15分钟）
**引导话术**：
"能否详细介绍一下您在Android系统层方面最有挑战的项目？包括背景、技术难点、您的解决方案和最终效果。"

**评估维度**：
- 项目复杂度（是否真的涉及系统层）
- 技术深度（是否涉及Framework定制、Native开发）
- 问题解决能力（遇到问题如何分析和解决）
- 项目结果（是否有可量化的成果）

**追问示例**：
- "您是如何定位这个问题的？使用了哪些工具？"
- "为什么选择这个技术方案？有考虑过其他方案吗？"
- "这个项目的性能表现如何？有做过性能测试吗？"
- "团队中您的角色是什么？有指导其他成员吗？"

**红旗信号**：
- 说不清楚技术细节
- 项目描述模糊，可能不是本人负责
- 过度美化，无法回答深入问题
- 所有项目都是应用层开发

#### 3. Android Framework核心知识（20分钟）

##### 3.1 Activity启动流程（必问）
**问题**：
"请描述一下从startActivity()到Activity的onResume()被调用，中间经历了哪些步骤？"

**评分标准**：
- **5分**（优秀）：能完整描述整个流程，包括AMS、Zygote、Binder调用、ActivityThread等关键点
  - startActivity → Instrumentation → AMS.startActivity()
  - AMS检查、权限验证、Task/Stack管理
  - Zygote fork进程（如果需要）
  - ActivityThread.main()启动
  - Binder回调performLaunchActivity
  - onCreate → onStart → onResume

- **3分**（合格）：能说出主要流程，但细节不够清楚
  - 知道AMS的作用
  - 知道进程创建
  - 知道生命周期回调顺序

- **1分**（不合格）：只知道生命周期方法，不了解系统层流程

**追问**：
- "AMS在这个过程中做了什么？"
- "如果要实现Activity的虚拟化（双开），您会在哪里Hook？"
- "LaunchMode是如何影响Task栈的？"

##### 3.2 四大组件虚拟化（核心问题）
**问题**：
"如果要实现应用双开（多开），您会如何设计？请说说技术方案。"

**评分标准**：
- **5分**（优秀）：能提出完整的虚拟化方案
  - Hook AMS，拦截组件启动
  - 使用占位组件绕过系统检查
  - 路径映射实现存储隔离
  - Binder代理实现进程通信劫持
  - 提到VirtualApp等现有方案

- **3分**（合格）：有基本思路但不完整
  - 知道需要Hook系统服务
  - 知道需要解决包信息问题
  - 思路基本正确但缺少细节

- **1分**（不合格）：没有思路或思路错误

**追问**：
- "占位Activity是什么？为什么需要它？"
- "如何让系统相信沙盒中的应用已经安装？"
- "ContentProvider如何虚拟化？"

##### 3.3 PMS和应用安装
**问题**：
"APK安装的完整流程是怎样的？PMS做了哪些事情？"

**评分标准**：
- **5分**：APK解析 → 签名验证 → 拷贝文件 → Dex优化 → 注册到PMS
- **3分**：知道主要步骤但细节不清楚
- **1分**：不了解安装流程

**追问**：
- "如何伪造包信息实现虚拟安装？"
- "签名校验在哪个阶段？如何绕过？"

##### 3.4 WMS和Window管理
**问题**：
"Window的添加流程是怎样的？WMS做了什么？"

**评分标准**：
- **5分**：Window创建 → WMS.addWindow() → Surface分配 → View绘制
- **3分**：知道WMS管理Window
- **1分**：不了解Window机制

**追问**：
- "如何实现多实例Window隔离？"
- "Window的类型有哪些？优先级如何？"

#### 4. Binder和进程间通信（15分钟）

##### 4.1 Binder通信原理（必问）
**问题**：
"请描述一下Binder通信的完整流程，从Client到Server。"

**评分标准**：
- **5分**（优秀）：能描述完整流程
  - Client调用Proxy → transact()
  - Binder驱动 → binder_transaction
  - Server的Stub.onTransact()处理
  - 返回结果逆向传递
  - 提到mmap、binder_ref等细节

- **3分**（合格）：知道Proxy-Stub模式，了解基本流程
- **1分**（不合格）：不了解Binder原理

**追问**：
- "Binder的mmap机制是什么？为什么只需要一次拷贝？"
- "ServiceManager的作用是什么？"
- "Binder线程池是如何工作的？"

##### 4.2 Binder Hook（核心能力）
**问题**：
"如何Hook AMS的getService？有哪些Hook点可以选择？"

**评分标准**：
- **5分**（优秀）：能说出多种Hook方式
  - Hook ServiceManager.sCache（缓存替换）
  - Hook IActivityManager Proxy（动态代理）
  - Hook ActivityManagerNative.gDefault
  - 说出各种方式的优缺点

- **3分**（合格）：知道至少一种Hook方式
- **1分**（不合格）：不知道如何Hook

**追问**：
- "如何实现动态代理？"
- "Hook之后如何拦截和转发调用？"
- "如何处理不同Android版本的兼容性？"

##### 4.3 AIDL和IPC
**问题**：
"AIDL生成的代码包含哪些部分？Stub和Proxy的区别是什么？"

**评分标准**：
- **5分**：IInterface接口 + Stub抽象类 + Proxy实现类，能说清楚各自作用
- **3分**：知道Stub在Server端，Proxy在Client端
- **1分**：不了解AIDL生成代码

#### 5. Native开发能力（15分钟）

##### 5.1 JNI基础
**问题**：
"JNI函数的注册方式有哪些？静态注册和动态注册的区别是什么？"

**评分标准**：
- **5分**：能详细说明两种方式的实现和优缺点
- **3分**：知道两种方式，但细节不清楚
- **1分**：不了解JNI注册机制

**追问**：
- "如何在Native层调用Java方法？"
- "JNI引用类型有哪些？LocalRef和GlobalRef的区别？"

##### 5.2 Native Hook
**问题**：
"PLT Hook和Inline Hook的区别是什么？分别适用于什么场景？"

**评分标准**：
- **5分**：能说清楚原理和应用场景
  - PLT Hook：修改PLT表，适合Hook外部函数
  - Inline Hook：修改函数指令，适合Hook任何函数

- **3分**：知道有这些技术，但原理不清楚
- **1分**：不了解Native Hook

**追问**：
- "如何防止so被注入或Hook？"
- "系统库的Hook有哪些限制？"

##### 5.3 so库加载
**问题**：
"so库的加载和链接流程是怎样的？"

**评分标准**：
- **5分**：System.loadLibrary → JNI_OnLoad → dlopen → 符号解析
- **3分**：知道loadLibrary和JNI_OnLoad
- **1分**：不了解加载流程

### 一面评估标准

| 模块 | 权重 | 评分（1-5） | 备注 |
|------|------|------------|------|
| Framework核心知识 | 40% | | Activity启动、四大组件虚拟化 |
| Binder和IPC | 30% | | Binder原理、Hook能力 |
| Native开发 | 20% | | JNI、Hook、so加载 |
| 项目经验 | 10% | | 系统层项目深度和复杂度 |
| **一面总分** | **100%** | | |

**通过标准**：
- 总分 ≥ 3.5分 → 进入二面
- 总分 < 3.5分 或 Framework知识 < 3分 → 淘汰

### 一面话术模板

**开场**：
"您好，我是Cook-Hire的技术负责人XXX。今天主要想了解您在Android系统层方面的技术能力。我们大概需要60分钟，先聊聊您的项目经历，然后问一些技术问题。准备好了吗？"

**过渡**：
- "您刚才提到的XX很有意思，我们详细聊聊..."
- "接下来问几个Framework相关的问题..."
- "现在聊聊Binder和进程间通信..."

**结束**：
"好的，今天的技术面试就到这里。您的XX方面经验很不错。我们会在2-3个工作日内给您反馈，如果通过会安排二面。您有什么问题想了解的吗？"

---

## 二面：架构设计（60分钟）

### 面试目标
考察候选人的系统设计能力、技术方案选型、性能优化和稳定性保障能力。

### 面试结构
- 项目回顾（5分钟）
- 架构设计（30分钟）
- 性能和稳定性（15分钟）
- 技术视野（10分钟）

### 详细题库

#### 1. 沙盒系统架构设计（核心）

**问题**：
"我们要做一个车载应用沙盒系统，实现三方应用的虚拟化运行和管控。给定以下需求：
1. 应用虚拟安装、启动、运行
2. 四大组件虚拟化
3. 存储隔离和路径映射
4. 权限代理
5. 网络代理
6. 管控策略配置

请设计一个技术架构方案。"

**评估维度**：

##### 整体架构设计
- **5分**（优秀）：
  - 分层清晰：原生控制层、框架层、应用层
  - 模块划分合理：组件虚拟化、存储隔离、权限代理、网络代理等模块
  - 考虑扩展性：易于添加新功能
  - 考虑性能：减少Hook和反射
  - 考虑兼容性：适配不同Android版本

- **3分**（合格）：
  - 基本架构可行
  - 主要功能模块都有考虑
  - 但细节不够完善

- **1分**（不合格）：
  - 架构不合理
  - 遗漏重要模块
  - 技术方案不可行

##### 四大组件虚拟化方案
**追问**：
"四大组件的虚拟化您会怎么实现？"

- **5分**：
  - Activity：占位Activity + Intent替换
  - Service：占位Service + 多进程隔离
  - BroadcastReceiver：动态注册 + 消息转发
  - ContentProvider：Binder代理 + URI映射
  - 考虑生命周期管理

- **3分**：有基本方案但细节不够
- **1分**：方案不可行

##### 存储隔离方案
**追问**：
"如何实现存储隔离？沙盒应用访问自己的文件，但系统看到的是另一个路径。"

- **5分**：
  - Hook文件IO操作（open、openat等syscall）
  - 路径映射规则设计
  - 考虑多种存储类型（内部存储、外部存储、缓存）
  - 考虑权限问题

- **3分**：知道需要Hook IO，但方案不完整
- **1分**：没有可行方案

##### 权限代理方案
**追问**：
"沙盒应用申请权限如何处理？如何限制危险权限？"

- **5分**：
  - Hook PMS的权限检查
  - 自定义权限管理器
  - 支持动态授权和撤销
  - 考虑敏感权限的额外验证

- **3分**：有基本思路但不完整
- **1分**：没有方案

#### 2. 技术方案选型

**问题**：
"实现四大组件虚拟化有多种方案，如占位组件、Instrumentation替换、AMS Hook等。您会选择哪种？为什么？"

**评估重点**：
- 能否说出多种方案
- 能否分析各方案的优缺点
- 选择是否合理
- 是否考虑兼容性、性能、维护成本

**优秀回答示例**：
"我会选择占位组件 + AMS Hook的组合方案：
- 占位组件解决系统检查问题
- AMS Hook拦截并替换真实Intent
- 优点：兼容性好，性能开销小
- 缺点：需要预埋占位组件，代码略复杂
- 替代方案Instrumentation替换更简单，但在某些ROM上有兼容性问题"

#### 3. 性能优化

**问题**：
"虚拟化会带来性能开销，您会如何优化？"

**评分标准**：
- **5分**：
  - 减少反射调用（缓存Method和Field）
  - Hook点选择优化（避免高频调用链路）
  - 使用缓存（包信息、组件信息等）
  - 懒加载（按需Hook）
  - 多进程优化（减少跨进程通信）

- **3分**：能说出2-3个优化点
- **1分**：没有性能优化意识

**追问**：
- "如何测试性能？"
- "性能瓶颈一般在哪里？"

#### 4. 稳定性保障

**问题**：
"如何保证沙盒系统的稳定性？如何处理崩溃？"

**评分标准**：
- **5分**：
  - 异常捕获和处理
  - 进程隔离（沙盒应用崩溃不影响宿主）
  - 兼容性测试（多机型、多版本）
  - 崩溃日志收集和分析
  - 降级策略（Hook失败时的fallback）

- **3分**：有基本的异常处理
- **1分**：没有稳定性保障措施

#### 5. 技术视野

**问题**：
"您了解哪些插件化或虚拟化框架？能否对比一下它们的技术方案？"

**评分标准**：
- **5分**：
  - 了解VirtualApp、太极、DroidPlugin等多个框架
  - 能说出它们的技术差异
  - 对行业技术趋势有见解

- **3分**：了解1-2个框架
- **1分**：不了解相关框架

**追问**：
"如果让您从零开始设计，会采用哪个框架的思路？为什么？"

### 二面评估标准

| 模块 | 权重 | 评分（1-5） | 备注 |
|------|------|------------|------|
| 架构设计能力 | 40% | | 整体架构、模块划分、技术选型 |
| 技术深度 | 30% | | 方案细节、可行性、创新性 |
| 性能和稳定性 | 20% | | 性能优化、稳定性保障 |
| 技术视野 | 10% | | 对行业技术的了解和思考 |
| **二面总分** | **100%** | | |

**通过标准**：
- 总分 ≥ 3.5分 → 进入三面
- 总分 < 3.5分 → 淘汰

---

## 三面：团队匹配（45分钟）

### 面试目标
评估候选人的软性素质、文化契合度、创业心态和长期发展潜力。

### 面试结构
- 职业规划（10分钟）
- 工作方式和价值观（15分钟）
- 案例分析（10分钟）
- 薪资期望和其他（10分钟）

### 详细题库

#### 1. 职业规划

**问题**：
"您接下来的职业规划是什么？为什么考虑加入创业公司？"

**评估重点**：
- 是否有清晰的职业目标
- 是否认可创业公司
- 是否看重技术成长和挑战
- 是否考虑长期发展

**红旗信号**：
- 只是想换工作，没有明确目标
- 对创业公司有很多顾虑
- 主要看重稳定性和福利
- 打算短期过渡

#### 2. 技术领导力

**问题**：
"您在团队中通常承担什么角色？有指导过其他工程师吗？"

**评估重点**：
- 是否有技术领导经验
- 如何指导团队成员
- 如何进行代码审查
- 如何推动技术决策

#### 3. 沟通和协作

**问题**：
"描述一次您与团队成员发生技术分歧的经历，最后是如何解决的？"

**评估重点**：
- 沟通方式是否成熟
- 是否能理解他人观点
- 是否能达成共识
- 是否有团队精神

#### 4. 学习能力

**问题**：
"您最近在学习什么新技术？是如何学习的？"

**评估重点**：
- 是否有持续学习习惯
- 学习方法是否有效
- 是否关注技术前沿
- 是否有技术热情

#### 5. 抗压能力

**问题**：
"描述一次您在高压下工作的经历，是如何应对的？"

**评估重点**：
- 抗压能力如何
- 是否能在压力下保持效率
- 如何调节情绪
- 是否适合创业节奏

#### 6. 创业心态

**问题**：
"您如何看待创业公司的不确定性？对加班和工作强度有什么看法？"

**评估重点**：
- 是否能接受不确定性
- 对工作强度的预期是否合理
- 是否有ownership意识
- 是否愿意为公司成功付出

### 三面评估标准

| 模块 | 权重 | 评分（1-5） | 备注 |
|------|------|------------|------|
| 职业规划 | 20% | | 目标清晰度、发展潜力 |
| 技术领导力 | 25% | | 指导能力、决策能力 |
| 沟通协作 | 20% | | 沟通能力、团队精神 |
| 学习能力 | 15% | | 学习习惯、技术热情 |
| 创业心态 | 20% | | 抗压能力、ownership |
| **三面总分** | **100%** | | |

**通过标准**：
- 总分 ≥ 3.5分 → 进入HR面
- 总分 < 3.5分 → 淘汰

---

## HR面：薪资和背调（30分钟）

### 面试目标
确定薪资、股权、到岗时间，进行背景调查。

### 流程
1. 薪资期望确认
2. 股权激励说明
3. 到岗时间协商
4. 背景调查授权
5. 其他福利说明

### 薪资谈判策略

**定级参考**：
- S级（≥4.5分）：35-40K + 0.8-1%股权
- A级（≥4.0分）：32-35K + 0.6-0.8%股权
- B级（≥3.5分）：28-32K + 0.5-0.6%股权

**谈判空间**：预留10-15%浮动空间

**股权说明**：
- 期权形式，4年兑现
- 与公司估值挂钩
- 离职时可回购

### 背景调查
- 工作经历核实
- 离职原因确认
- 工作表现评价
- 学历验证

---

## 总体评估和录用决策

### 综合评分

| 面试轮次 | 权重 | 得分 |
|---------|------|------|
| 一面：技术基础 | 40% | |
| 二面：架构设计 | 35% | |
| 三面：团队匹配 | 25% | |
| **综合得分** | **100%** | |

### 录用标准
- **强烈推荐**：综合得分 ≥ 4.0 且 一面 ≥ 4.0
- **推荐录用**：综合得分 ≥ 3.5 且 无单轮 < 3.0
- **不推荐**：综合得分 < 3.5 或 有单轮 < 2.5

### Offer审批流程
1. 面试官提交评估报告
2. 技术团队讨论
3. CEO/CTO终审
4. HR发放Offer

---

## 注意事项

### 面试礼仪
- 提前5分钟准备，准时开始
- 营造轻松的面试氛围
- 认真倾听，不要打断候选人
- 做好面试记录

### 公平性
- 所有候选人使用相同标准
- 避免歧视（年龄、性别、地域等）
- 给予候选人充分展示机会

### 保密性
- 不透露其他候选人信息
- 不透露公司敏感信息
- 面试评估结果仅内部使用

### 反馈
- 3个工作日内给出反馈
- 淘汰候选人给予建设性意见
- 通过候选人尽快安排下一轮

---

## 更新记录
- 2026-02-02：初始版本
